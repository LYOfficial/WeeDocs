# 宣传部课题第七讲——提示词

我们使用文生文和文生图时，都需要进行的一件事，就是做 Prompt 工程。

在人工智能（AI）领域中，"prompt" 是指向模型提供输入以引导其生成特定输出的文本或指令。它是与模型进行交互时用户提供的文本段落，用于描述用户想要从模型获取的信息、回答、文本等内容。Prompt 的目的是引导模型产生所需的回应，以便更好地控制生成的输出。

今天我们来学习如何写出完美高效的提示词。

### 1.提示词规则

由于 ComfyUI 所使用的模型数据集限制，文生图的时候需要按照一定的规则执行。

简要概括来说就是 **英文书写，使用词组，调整权重** 。

### 2.插件安装

ComfyUI 作为一款有前端的工具，当然会存在一些便于使用的插件了。

ComfyUI 的插件存放地址是 `ComfyUI_windows_portable\ComfyUI\custom_nodes` ，可以在文件夹内放入插件文件夹进行使用，插件一般可以从网上例如 Github 下载。

以下是几个常用插件：

```
//多语言翻译工具
git clone https://github.com/AIGODLIKE/AIGODLIKE-COMFYUI-TRANSLATION.git
//ComfyUI 自定义工具大全
git clone https://github.com/pythongosssss/ComfyUI-Custom-Scripts.git
//提示词助手
git clone https://github.com/thisjam/comfyui-sixgod_prompt.git
```

对应用法和功能在各自仓库的 README 文件都可以找到，相信大家用了这么久的 Github 应该能自己找到吧，这里就不多说了。

### 3.提示词分类

确定我们要画什么之后，我们写提示词需要有一定的顺序，从整个画的构图、质量、光影、风格等开始，再介绍主体的形象，而这正是与提示词的分类有关。

如果对提示词进行一个比较粗略的分类的话，大概是这样：

```
📁ComfyUI 提示词    
├── 起手方式                   
│  ├── 正面基本要素
│  ├── 负面基本要素
│  ├── 构图
│  ├── 画风
│  └── 光影
├── 人物
│  ├── 特性
│  │    ├── 人设
│  │    ├── 性别/年龄
│  │    ├── 性征
│  │    ├── 面部
│  │    └── 身体状态
│  ├── 服饰
│  ├── 发型
│  ├── 动作
│  └── 表情
├── 动物
│  ├── 特性
│  │    ├── 物种
│  │    ├── 性别/年龄
│  │    ├── 花色
│  │    ├── 特征
│  │    │    ├──翅膀
│  │    │    ├──尾巴
│  │    │    └──毛发
│  │    └── 状态
│  ├── 服饰
│  ├── 动作
│  └── 表情
├── 环境
│  ├── 特性
│  │    ├── 真实/虚拟
│  │    ├── 室内/室外
│  │    ├── 人造/自然
│  │    ├── 现代化/乡村化
│  │    ├── 建筑
│  │    │    ├──中式古建筑
│  │    │    ├──现代建筑
│  │    │    └──毛发
│  │    └── 状态
│  └── 背景
│  │    ├── 真实/虚拟
│  │    ├── 透明/纯色/纹理
│  │    └── 状态          
└── ...              
```

### 4.提示词权重

提示词很多，但同时给出很多类似的提示词，机器就会难以判断谁的优先级高、占比更大，可能会生成一些交融的内容，这需要我们手动调整提示词权重占比。

调整提示词占比有两种做法。

**动态提示法**

在 ComfyUI 中，可以使用英文符号 ( ) [ ] 来调整权重占比，前增后减。

可以理解为 (prompt) 把提示词权重增加到 1.1，[prompt] 把提示词权重降低到 0.9。然后 ((prompt)) 权重就是1.1*1.1=1.21。

然而实际上，这并不是一个准确的增比数值，只是可以这么理解，动态提示法增加权重就是叠的括号越多占比越大。

**权重数值法**

除了叠加括号数量，可以直接在括号内使用 (prompt:factor) 的方式来直接改动权重，比如：

(keyword:1.2) 就是让这一条 keyword 的权重变为 1*1.2=1.2

[keyword:1.2] 就是让这一条 keyword 的权重变为 1/1.2=0.83

### 5.主体分割

如果我们要画一个人在某个特定环境的画面，而且这个人的种种特点和环境的特点我们都想要定制，但又怕提示词融合到一起了，实现不了我们的画面，我们就可以进行主体分割。

```
主体一\(描述1, 描述2, 描述3\),主体二,主体三
```

### 6.元素随机

如果我们想生成一个形象却又不知定那个特点好，可以用元素随机，让机器帮你随机做一个抉择。

```
(keyword1 | keyword2 | keyword3)prompt
```

这样的一个提示词组写出来之后，机器会从三个 keyword 中任选其一画出图像。

### 7.元素融合

如果我们想生成混搭内容，比如混色，可以使用元素融合方法。

**并集法**

使用 `AND` 来让两个元素融合，就像创建两个元素的并集一样，注意要使用大写，例如：

```
keyword1 AND keyword2
```

**中括号法**

使用中括号来让两个元素合并，注意小括号是随机，中括号是合并，例如：

```
[keyword1 | keyword2]
```

通过合理的图片融合，结合 ComfyUI 强大工作流的使用，就可以完成一些图生图的融合图片，例如下图使用 ControlNet 模型完成的狗狗图片绘制。

![](https://i0.hdslb.com/bfs/article/fcb88c17735c439654b48d3d7b6345a7ff3cddf6.png@1192w_1192h.avif)
